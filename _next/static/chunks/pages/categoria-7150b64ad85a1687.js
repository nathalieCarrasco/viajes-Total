(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{420:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categoria",function(){return t(6215)}])},6215:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var n=t(5893);function a(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("footer",{children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"contacto"}),(0,n.jsx)("li",{children:"redes"})]})})})}function i(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("header",{children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{children:"PANEL DE ADMINISTRACION "})}),(0,n.jsx)("div",{children:"volver a la pagina principal"})]})})}function s(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{}),e.children,(0,n.jsx)(a,{})]})}var o=t(7294),c={getBaseUrl:()=>"https://boiling-purring-finch.glitch.me/"};function l(e,r){let[t,a]=(0,o.useState)(""),[i,s]=(0,o.useState)(""),l=async n=>{try{n.preventDefault();let a=c.getBaseUrl(),s=await fetch(a+"/categoria",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:t,descripcion:i})});if(!s.ok)throw Error("No se pudo guardar la categor\xeda...");let o=await s.json();console.dir(o),r([...e,o])}catch(e){console.error(e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("form",{action:"form",method:"post",onSubmit:l,children:[(0,n.jsx)("label",{htmlFor:"nombre",children:"Nombre:"}),(0,n.jsx)("input",{type:"text",id:"nombre",value:t,onChange:e=>a(e.target.value)}),(0,n.jsx)("label",{children:"Descripcion:"}),(0,n.jsx)("textarea",{value:i,onChange:e=>s(e.target.value)}),(0,n.jsx)("button",{type:"submit",children:"Guardar"})]}),"Nombre:",t," \\ descripcion:",i]})}function d(e){let{categorias:r,setCategorias:t}=e,a=async()=>{try{let e=c.getBaseUrl(),r=await fetch(e+"/categoria");if(!r.ok)throw Error("Problemas al recuperar las categor\xedas!");let n=await r.json();t(n)}catch(e){console.error(e)}};(0,o.useEffect)(()=>{a()},[]);let i=async e=>{try{let r=c.getBaseUrl(),t=r+"/categoria?id="+e.id,n=await fetch(t,{method:"DELETE"});if(!n.ok)throw Error("No se pudo borrar la categor\xeda!!!");await n.json(),console.log("Categor\xeda borrada de manera exitosa"),a()}catch(e){console.error({error:e.message})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"listado de las categorias "}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"NOMBRE"}),(0,n.jsx)("th",{children:"DESCRIPCION"}),(0,n.jsx)("th",{children:"ACCIONES"})]})}),(0,n.jsx)("tbody",{children:r.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.nombre}),(0,n.jsx)("td",{children:e.descripcion}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{children:"Editar"}),(0,n.jsx)("button",{onClick:()=>i(e),children:"Eliminar"})]})]},e.id))})]})]})}function h(e){let[r,t]=(0,o.useState)([]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l,{categorias:r,setCategorias:t}),(0,n.jsx)("hr",{}),(0,n.jsx)(d,{categorias:r,setCategorias:t})]})}function u(){return(0,n.jsxs)(s,{children:[(0,n.jsx)("h1",{className:"titulo",children:"Categoria"}),(0,n.jsx)(h,{})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=420)}),_N_E=e.O()}]);